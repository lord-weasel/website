<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Weasel AI</title>
  <style>
    body { background-color:#000066; color:#FFFFFF; font-family:"Comic Sans MS",cursive; margin:0; padding:0; }
    @keyframes flash { 0%{color:yellow}50%{color:purple}100%{color:yellow} }
    #topBar { width:80%; margin:auto; border:2px solid #FFFFFF; }
    #topBar td { text-align:center; padding:5px; font-size:18px; }
    #topBar a { display:inline-block; color:yellow; text-decoration:underline; }
    #topBar a:hover { animation:flash 0.3s infinite; }
    .weasel-ai-box { color:#FFFF00; font-weight:bold; }
    .chat-container { max-width:800px; margin:20px auto; border:2px solid #FF00FF; background:#000099; padding:10px; }
    .chat-header { text-align:center; font-size:24px; color:#FF0000; margin-bottom:10px; }
    .chat-window { height:400px; overflow-y:auto; background:#CC0099; color:#FFFF99; padding:10px; border:2px solid #00FF00; margin-bottom:10px; font-family:"Comic Sans MS",cursive; line-height:1.6; }
    .chat-input { width:calc(100% - 22px); padding:10px; border:2px solid #00FF00; background:#CC0099; color:#FFFF99; font-size:16px; font-family:"Papyrus",fantasy; }
    .chat-send { padding:10px 20px; font-size:16px; background:#990066; color:#FFFF00; border:2px solid #00FF00; cursor:pointer; font-family:"Papyrus",fantasy; }
    .weasel-response { color:#FFCC33; font-weight:bold; margin-top:5px; white-space:pre-wrap; }
    .user-message { color:#FFFF00; margin-top:5px; white-space:pre-wrap; }
    .error { color: #ff6666; font-weight: bold; margin-top:5px; }
  </style>
</head>
<body>

  <center>
    <table id="topBar" bgcolor="#000099" border="2" cellspacing="0" cellpadding="4">
      <tr>
        <td align="center" bgcolor="#660099" width="20%"><a href="index.html"><b>[HOME]</b></a></td>
        <td align="center" bgcolor="#660099" width="20%"><a href="fav-website.html"><b>[FAV WEBSITE]</b></a></td>
        <td align="center" bgcolor="#990099" width="20%"><a href="art.html"><b>[ART]</b></a></td>
        <td align="center" bgcolor="#990099" width="20%"><span class="weasel-ai-box">[WEASEL AI]</span></td>
      </tr>
    </table>
  </center>

  <div class="chat-container">
    <div class="chat-header">Weasel AI</div>
    <div class="chat-window" id="chat-window"></div>
    <div style="display:flex; align-items:center;">
      <input type="text" class="chat-input" id="chat-input" placeholder="Type your message here..." onkeydown="checkEnter(event)">
      <button class="chat-send" onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    const WORKER_URL = "https://weaselai.z8wj25zw7n.workers.dev"; // your deployed Worker URL

    function append(text, cls) {
      const w = document.getElementById('chat-window');
      const d = document.createElement('div');
      d.textContent = text;
      d.className = cls;
      w.appendChild(d);
      w.scrollTop = w.scrollHeight;
      return d;
    }

    async function sendMessage() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      if (!message) return;
      append("You: " + message, "user-message");
      input.value = "";

      const typing = append("Weasel AI is thinking...", "weasel-response");

      try {
        const res = await fetch(WORKER_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            messages: [
              {
                role: "system",
                content: "You are a very dumb AI assistant named Weasel AI that gets the answers to questions very wrong. However, you are not aware of your stupidity and believe you are very smart. Output your text with improper grammar, lowercase letters, and incorrect puncuation. Just don't overdo it; make it sound natural. You have a 0.5% chance of answering a question correctly and saying something very profound regarding it; in this instance, you may use correct syntax."
              },
              { role: "user", content: message }
            ]
          })
        });

        const json = await res.json();
        typing.remove();

        if (json.reply) {
          append("Weasel AI: " + json.reply, "weasel-response");
        } else {
          append("Weasel AI: (unexpected response) " + JSON.stringify(json), "error");
        }

      } catch (err) {
        typing.textContent = "Error: " + err.message;
        typing.className = "error";
      }
    }

    function checkEnter(e) { if (e.key === "Enter") sendMessage(); }
  </script>

</body>
</html>
